# 統計的スタティックタイミングアナライザ nhssta 0.0.8

本ドキュメントには、統計的スタティックタイミングアナライザ nhssta
0.0.8 (以下、nhssta ) の概要、使用方法、及び使用上の注意点が記載されて
います。

## 1. 概要

### 1.1 機能
nhsstaは統計的な解析を行うスタティックタイミングアナライザです。nhssta
は以下の機能を持ちます。
   
・各ノードでのLAT(最終到着時刻)の平均、標準偏差の計算
・各ノードでのLAT間の相関係数の計算

### 1.2 ディレクトリ構成

 nhssta/README               本ドキュメント
        ChangeLog            変更履歴
        Makefile             メイクファイル
       /src/*.[Ch]           ソースファイル
       /example/*.bench      サンプル.benchデータ
               /*.dlib       サンプル.dlibデータ
               /nhssta_test  テストスクリプト
               /result*      テストスクリプト実行結果

## 2. 使用方法

### 2.1 コンパイル、テスト

- nhssta は "boost C++ ライブラリ(以下 boost)" を使用しますので 予 boost 
  をインストールして下さい(フルインストールは必要ありません。
  ヘッダのみのインストールで動作します。) boost のインストールについて
  は以下の web が参考になります。

  http://www.boost.org/
  http://www.kmonos.net/alang/boost/

- コンパイルには g++ ( 3.3.3 以上 ) が必要です。

- Makefile を適当なエディタで開き 5行目

INCLUDE = -I/home/jiro/packages/boost 

  を

INCLUDE = -I"boostをインストールしたディレクトリ名"

  のように自分の環境に合わせて書き換えます。

- 一つ上のディレクトリ nhssta-0.0.8 に戻り make を実行します。

> cd ..
> make 

コンパイルが終了すると ディレクトリ src 以下に nhssta という実行ファイ
ルが作成されます。

> make check

とすると、テストスクリプトが実行されます。何も問題がなければ

cd example; make
make[1]: Entering directory `/home/jiro/project/nhssta-0.0.6.2/example'
./nhssta_test
nhssta 0.0.8 (Fri May 26 00:32:27 2006)
OK
nhssta 0.0.8 (Fri May 26 00:32:27 2006)
OK
...
...

のように表示され、数秒でテストが終了します。コパイルできない、動作がお
かしいなどの場合は jiro@gmail.com までお知せ下さい。

### 2.2 実行方法

src/nhssta をパスの通った適当な場所にコピーし、コマンドラインから以下
のように実行します。

> nhssta -d [.dlibファイル] -b [.benchファイル] [-l] [-c] 

- .dlibファイル及び.benchファイルのファイルフォーマットは佐藤先生(東工
  大)作成の sta_montecarlo と共通です。

- -l ( --lat ) を指定すると各ノードでのLATの平均、標準偏差を標準出力に
  出力します。

- -c ( -correlation ) ノード間でのLATの相関係数をを標準出力に出力します。

### 2.3 実行例
以下に example 以下で -l, -c を指定した実行例を示します。

--
$ ../src/nhssta -l -c -d ex4_gauss.dlib -b ex4.bench 
nhssta 0.0.8 (Fri May 26 00:34:30 2006)

#
# LAT
#
#node		     mu	     std
#---------------------------------
A                   0.000    0.001
B                   0.000    0.001
C                   0.000    0.001
N1                 35.016    3.575
N2                 15.000    2.000
N3                 50.016    4.097
N4                 43.902    3.992
Y                  89.791    4.929
#---------------------------------

#
# correlation matrix
#
#	A	B	C	N1	N2	N3	N4	Y	
#--------------------------------------------------------------------
A	1.000	0.000	0.000	0.000	0.000	0.000	0.000	0.000	
B	0.000	1.000	0.000	0.000	0.000	0.000	0.000	0.000	
C	0.000	0.000	1.000	0.000	0.000	0.000	0.000	0.000	
N1	0.000	0.000	0.000	1.000	0.554	0.873	0.274	0.556	
N2	0.000	0.000	0.000	0.554	1.000	0.483	0.495	0.401	
N3	0.000	0.000	0.000	0.873	0.483	1.000	0.239	0.617	
N4	0.000	0.000	0.000	0.274	0.495	0.239	1.000	0.404	
Y	0.000	0.000	0.000	0.556	0.401	0.617	0.404	1.000	
#--------------------------------------------------------------------
OK
--

## 3. 使用上の注意

- ゲート遅延のみが考慮され配線遅延は考慮されません。

- 入力ノードとDFFのck端子の到着時刻は平均 0、標準偏差 0.001 となり
  ます。

- .dlib で遅延分布の指定は gauss と const のみが指定できます。const の場合
  は標準偏差 0.001 の正規分布として扱います。

- nhssta はプロトタイプであり、まだ多くのバグが含まれている可能性があり
  ます。実行結果の妥当性については十分に検証されていません。


## 4. 参考文献
nhssta は 以下の文献の手法に基づいて実装されています。

Jiayong Le, Xin Li, Lawrence T. Pileggi: STAC: statistical timing
analysis with correlation. DAC 2004: 343-348
